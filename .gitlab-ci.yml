image: maven:latest

stages:
  - test
  - Code-Quality
  - build

include:
  - template: Code-Quality.gitlab-ci.yml


test:
  stage: test
  artifacts: 
    paths:
      - coder-gate/target
    reports:
      junit:
        - ./coder-gate/target/ProjectReports/TEST_*.xml
  script:
    - cd coder-gate
    - echo "Pipeline test started"
    - mvn verify
  tags:
    - Group19Runner


code_quality:
  stage: Code-Quality
  image: docker:19.03.11
  artifacts:
    reports:
      codequality: builds/courses/2023-winter/csci-5308/group19/gl-code-quality-report.json   

build:
  stage: build
  script:
    - cd coder-gate
    - echo "Building the pipeline"
    - mvn clean package
  artifacts:
    paths:
      - coder-gate/target
  tags:
    - Group19Runner




